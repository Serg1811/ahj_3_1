(()=>{"use strict";class e{constructor(){this.board=null}createBoard(e){const t=document.createElement("div");t.classList.add("wrapper"),t.style.width=140*e+"px";for(let s=0;s<e**2;s+=1){const e=document.createElement("div");e.classList.add("cell"),t.appendChild(e)}return this.board=t,this.board}}(new class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.board=new e,this.boardSize=t,this.index=null}init(){document.body.appendChild(this.board.createBoard(this.boardSize)),this.cells=[...document.querySelectorAll(".cell")],this.img=document.images[0],this.greeting=document.querySelector(".greeting"),this.counters=document.querySelector(".counters"),this.gameOver=document.querySelector(".game-over"),this.newGame=document.querySelector(".start-game"),this.stopGame=document.querySelector(".stop-game"),this.hitCounter=document.querySelector(".hit"),this.missCounter=document.querySelector(".miss"),this.wrapper=document.querySelector(".wrapper"),this.newGame.addEventListener("click",(()=>this.start())),this.stopGame.addEventListener("click",(()=>this.stop())),this.clickCounterFunc=this.clickCounter.bind(this)}getIndex(){this.countCheck=!1;let e=null;do{e=Math.floor(Math.random()*this.boardSize**2)}while(e===this.index);return e}generateGoblin(){(this.index||0===this.index)&&(this.cells[this.index].classList.remove("active"),this.cells[this.index].innerHTML=""),this.index=this.getIndex();const e=this.cells[this.index];e.classList.add("active"),e.appendChild(this.img)}start(){this.greeting.classList.add("display_none"),this.gameOver.classList.add("display_none"),this.newGame.classList.add("display_none"),this.wrapper.classList.add("wrapper_active"),this.counters.classList.remove("display_none"),this.stopGame.classList.remove("display_none"),this.hit=0,this.miss=0,this.redrawGameScore(),this.generateGoblin(),this.eventListener(),this.interval=setInterval((()=>{this.countCheck||(this.miss+=1,this.redrawGameScore(),this.checkGameOver()),this.generateGoblin()}),1e3)}stop(){clearInterval(this.interval),this.wrapper.removeEventListener("click",this.clickCounterFunc),this.greeting.classList.add("display_none"),this.gameOver.classList.add("display_none"),this.stopGame.classList.add("display_none"),this.counters.classList.remove("display_none"),this.newGame.classList.remove("display_none"),this.wrapper.classList.remove("wrapper_active")}eventListener(){this.wrapper.addEventListener("click",this.clickCounterFunc)}clickCounter(e){this.checkClick(e.target),this.redrawGameScore(),this.checkGameOver()}redrawGameScore(){this.hitCounter.textContent=this.hit,this.missCounter.textContent=this.miss}checkClick(e){e.closest(".active")?this.hit+=1:this.miss+=1,this.countCheck=!0}checkGameOver(){this.miss>4&&(clearInterval(this.interval),this.wrapper.removeEventListener("click",this.clickCounterFunc),this.counters.classList.add("display_none"),this.stopGame.classList.add("display_none"),this.gameOver.classList.remove("display_none"),this.newGame.classList.remove("display_none"),this.wrapper.classList.remove("wrapper_active"))}}).init()})();